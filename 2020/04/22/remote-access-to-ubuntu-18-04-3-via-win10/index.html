<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>remote access to ubuntu 18.04.3 via win10</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=Edge，chrome=1"><meta name="description" content=""><meta name="keywords"><meta name="author" content="miaulab"><link rel="short icon" href="/"><link rel="icon" href="/"><!--[if lt IE 9]><script src="/js/modernizr.js"></script><![endif]--><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/index.css?v=202004231505">
<link rel="stylesheet" href="/css/info.css?v=202004231505"><link href="https://cdn.bootcss.com/highlight.js/9.15.9/styles/github.min.css" rel="stylesheet"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body><header id="header" class="header-navigation"><nav><div class="logo"><a href="http://yoursite.com">Hexo</a></div><h2 id="mnavh"><span class="navicon"></span></h2><ul id="starlist"><li><a href="/">Home</a></li><li><a href="/time.html">SptialTemporal</a></li></ul><div class="searchbox"><div id="search_bar" class="search_bar"><input id="keyboard" placeholder="anything interesting..." type="text" name="keyboard" autocomplete="off" class="input"><p class="search_ico"><span></span></p></div></div></nav></header><article><main><div class="con_warp"><div class="infosbox"><div class="newsview"><h3 class="news_title">remote access to ubuntu 18.04.3 via win10</h3><div class="bloginfo"><ul><li class="author">作者：<a href="/">miaulab</a></li><li class="lmname"><a href="/"></a></li><li class="timer">时间：2020-04-22 17:53:21</li><li class="view"><span id="busuanzi_value_page_pv">99</span><span>次访问</span></li></ul></div><div class="tags"><a href="/tags/xrdp-xfce/" target="_blank">xrdp+xfce</a></div><div class="news_con"><p>Recently I tried to remote login to my Ubuntu 18.04.3 from my win10 laptop. I experienced pretty much trial and error.</p>
<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><h4 id="1-install-vnc4server-some-said-this-tightvncserver-should-be-installed-prior-to-xrdp"><a href="#1-install-vnc4server-some-said-this-tightvncserver-should-be-installed-prior-to-xrdp" class="headerlink" title="1. install vnc4server (some said this/tightvncserver should be installed prior to xrdp)"></a>1. install vnc4server (some said this/tightvncserver should be installed prior to xrdp)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">~$sudo apt-get install vnc4server</span></pre></td></tr></table></figure>

<h4 id="2-install-xrdp"><a href="#2-install-xrdp" class="headerlink" title="2. install xrdp"></a>2. install xrdp</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">~$sudo apt-get install xrdp</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">~$sudo sudo systemctl enable xrdp</span></pre></td></tr></table></figure>

<h4 id="3-install-xfce4"><a href="#3-install-xfce4" class="headerlink" title="3. install xfce4"></a>3. install xfce4</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">~$sudo apt-get update</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">~$sudo apt-get install xfce4</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">~$sudo apt-get install xubuntu-desktop</span></pre></td></tr></table></figure>

<h4 id="4-configure-xfce4"><a href="#4-configure-xfce4" class="headerlink" title="4. configure xfce4"></a>4. configure xfce4</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">~$echo &quot;xfce4-session&quot; &gt;~&#x2F;.xsession</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">~$sudo vi &#x2F;etc&#x2F;xrdp&#x2F;startwm.sh</span></pre></td></tr></table></figure>

<p>before the line ./etc/X11/Xsession, insert:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">xfce4-session</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">~$sudo service xrdp restart</span></pre></td></tr></table></figure>

<p>But after connecting from win10, it stuck at the login page like this:</p>
<p><img src="/2020/04/22/remote-access-to-ubuntu-18-04-3-via-win10/D:%5CBlog%5Chexo%5Csource_posts%5Cremote-access-to-ubuntu-18-04-3-via-win10%5Cxrdp_issue.png" alt="xrdp_issue"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Connecting to sesman IP 127.0.0.1 port 3350</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">sesman connect ok</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">sending login info to session manager, please wait...</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">srdp_mm_process_login_response:login successful for display</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">started connecting</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">connecting to 127.0.0.1 5910</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">error-problem connecting</span></pre></td></tr></table></figure>

<h3 id="Problem-Solving"><a href="#Problem-Solving" class="headerlink" title="Problem Solving"></a>Problem Solving</h3><p>Install missing dependencies by issuing the following command.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">~$sudo apt-get install xorgxrdp</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">~$sudo apt-get install xserver-xorg-core</span></pre></td></tr></table></figure>

<p>Fixing keyboard and mouse interaction issues:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">~$sudo apt-get-y install xserver-xorg-input-all</span></pre></td></tr></table></figure>

<p>For certain user, it might further need to change this file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">~$sudo vi &#x2F;etc&#x2F;X11&#x2F;Xwrapper.config</span></pre></td></tr></table></figure>

<p>where change</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">allowed_user&#x3D;anybody</span></pre></td></tr></table></figure>

</div></div><div class="nextinfo"><p>上一篇：没有了</p><p>下一篇：<a href="/2020/01/08/Building-SSR-with-VPS/">Building SSR with VPS</a></p></div><div class="news_pl"><div id="comment_container"></div><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="/js/md5.min.js"></script><script>const gitalk = new Gitalk({
    clientID: '2952058f51c4923be91a',
    clientSecret: '2e86df693dcb17ab547a167e7bcd819c483838b3',
    repo: 'nagith.github.io',
    owner: 'nagith',
    admin: ['nagith'],
    id: md5("2020/04/22/remote-access-to-ubuntu-18-04-3-via-win10/"),      // Ensure uniqueness and length less than 50
    distractionFreeMode: true  // Facebook-like distraction free mode
})
gitalk.render('comment_container')</script></div></div></div></main><aside class="r_box"><div class="card box"><h2>我的名片</h2><div class="box_con"><p>网名：喵怪</p>
<p>职业：喵村扫地僧</p>
<p>Email：miaulab@163.com</p>
</div></div><div class="category box"><h2>文章分类</h2><div class="box_con"></div></div></aside></article><footer><section class="footer_bottom"><div class="footer_container"><p class="copyright"></p><ul class="social_network"></ul></div></section></footer><div class="cd-top"><i class="iconfont icon-top"></i></div><script src="/js/jquery.min.js"></script>
<script src="/js/scrollreveal.js"></script>
<script src="/js/hc-sticky.js"></script><script src="/js/canvas-nest.js" type="text/javascript" color="47,135,193" opacity="0.7" zIndex="-2" count="199"></script><script src="https://cdn.bootcss.com/highlight.js/9.15.9/highlight.min.js"></script><script src="https://cdn.bootcss.com/highlight.js/9.15.9/languages/java.min.js"></script><script src="https://cdn.bootcss.com/highlight.js/9.15.9/languages/javascript.min.js"></script><script type="text/javascript">hljs.initHighlightingOnLoad();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/common.js?v=202004231505"></script>
<script src="/js/index.js?v=202004231505"></script></body></html>